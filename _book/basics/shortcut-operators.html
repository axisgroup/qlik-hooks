
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Shortcut Operators Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="delta.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Qlik Hooks v0.1.0
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Introduction
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../introduction/why-rx.html">
            
                <a href="../introduction/why-rx.html">
            
                    
                    Why Rx?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../introduction/rxq-vs-enigma.html">
            
                <a href="../introduction/rxq-vs-enigma.html">
            
                    
                    RxQ vs. Enigma
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../introduction/core-concepts.html">
            
                <a href="../introduction/core-concepts.html">
            
                    
                    Core Concepts
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Basics
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="connecting.html">
            
                <a href="connecting.html">
            
                    
                    Connecting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="making-api-calls.html">
            
                <a href="making-api-calls.html">
            
                    
                    Making API Calls
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="reusing-handles.html">
            
                <a href="reusing-handles.html">
            
                    
                    Reusing Handles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="handle-invalidations.html">
            
                <a href="handle-invalidations.html">
            
                    
                    Handle Invalidations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="suspending-invalidations.html">
            
                <a href="suspending-invalidations.html">
            
                    
                    Suspending Invalidations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="closing-a-session.html">
            
                <a href="closing-a-session.html">
            
                    
                    Closing a Session
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="notifications.html">
            
                <a href="notifications.html">
            
                    
                    Notifications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="delta.html">
            
                <a href="delta.html">
            
                    
                    Delta Mode
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.9" data-path="shortcut-operators.html">
            
                <a href="shortcut-operators.html">
            
                    
                    Shortcut Operators
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Recipes
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../recipes/connect.html">
            
                <a href="../recipes/connect.html">
            
                    
                    01. Connect to an Engine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../recipes/engine-version.html">
            
                <a href="../recipes/engine-version.html">
            
                    
                    02. Get the Engine Version
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../recipes/multiple-global-calls.html">
            
                <a href="../recipes/multiple-global-calls.html">
            
                    
                    03. Make Multiple Global Calls
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../recipes/open-an-app.html">
            
                <a href="../recipes/open-an-app.html">
            
                    
                    04. Open an App
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../recipes/read-app-props.html">
            
                <a href="../recipes/read-app-props.html">
            
                    
                    05. Get App Properties
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../recipes/set-app-props.html">
            
                <a href="../recipes/set-app-props.html">
            
                    
                    06. Set App Properties and Listen for Changes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../recipes/gen-obj-value.html">
            
                <a href="../recipes/gen-obj-value.html">
            
                    
                    07. Calculate a Value with a GenericObject
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../recipes/current-selections.html">
            
                <a href="../recipes/current-selections.html">
            
                    
                    08. Get a stream of Current Selections
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="../recipes/make-a-selection.html">
            
                <a href="../recipes/make-a-selection.html">
            
                    
                    09. Make a Selection in a Field
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="../recipes/loop-selections.html">
            
                <a href="../recipes/loop-selections.html">
            
                    
                    10. Loop through Selections in a Field
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.11" data-path="../recipes/make-lb-selections.html">
            
                <a href="../recipes/make-lb-selections.html">
            
                    
                    11. Make Selections in a Listbox
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.12" data-path="../recipes/search-lb.html">
            
                <a href="../recipes/search-lb.html">
            
                    
                    12. Search in a Listbox
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.13" data-path="../recipes/apply-patches.html">
            
                <a href="../recipes/apply-patches.html">
            
                    
                    13. Apply Patches to an Object
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.14" data-path="../recipes/get-data-page-on-invalid.html">
            
                <a href="../recipes/get-data-page-on-invalid.html">
            
                    
                    14. Get a page of data in a HyperCube on invalidation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.15" data-path="../recipes/get-pages-in-parallel.html">
            
                <a href="../recipes/get-pages-in-parallel.html">
            
                    
                    15. Get pages of data in parallel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.16" data-path="../recipes/get-pages-in-sequence.html">
            
                <a href="../recipes/get-pages-in-sequence.html">
            
                    
                    16. Get pages of data sequentially
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.17" data-path="../recipes/make-selections-on-app-open.html">
            
                <a href="../recipes/make-selections-on-app-open.html">
            
                    
                    17. Make selections on app open
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.18" data-path="../recipes/calc-time.html">
            
                <a href="../recipes/calc-time.html">
            
                    
                    18. Calculate the duration of an API call and response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.19" data-path="../recipes/batch-invalidations.html">
            
                <a href="../recipes/batch-invalidations.html">
            
                    
                    19. Batch Invalidations with Suspend
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.20" data-path="../recipes/toggle-sessions.html">
            
                <a href="../recipes/toggle-sessions.html">
            
                    
                    20. Toggle Calculations Between Multiple Apps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.21" data-path="../recipes/offline.html">
            
                <a href="../recipes/offline.html">
            
                    
                    21. Auto-reconnect Generic Objects after a network drop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.22" data-path="../recipes/shortcut-operators.html">
            
                <a href="../recipes/shortcut-operators.html">
            
                    
                    22. Using shortcut operators to get a layout stream
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Shortcut Operators</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="shortcut-operators-for-common-patterns">Shortcut Operators for Common Patterns</h1>
<h2 id="common-patterns">Common Patterns</h2>
<p>In the <a href="making-api-calls.html">Making API Calls</a> section, we discuss using methods like <code>mergeMap</code>, <code>switchMap</code>, and <code>concatMap</code> along with a Handle&apos;s <code>ask</code> method to turn an Observable of a Handle into an Observable of an API call. For example, to get the engine version from a global handle, you would do the following:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// Assuming an Observable of a Global Handle</span>
<span class="hljs-keyword">const</span> global$;

<span class="hljs-keyword">const</span> engineVersion$ = global$.pipe(
  switchMap(handle =&gt; handle.ask(EngineVersion))
);
</code></pre>
<p>When working with Handle Observables, you often want to reuse them to make API calls. In this scenario, it is common to <a href="reusing-handles.html">share the handle observable via multicasting</a>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> app$ = global$.pipe(
  switchMap(handle =&gt; handle.ask(OpenDoc, <span class="hljs-string">&quot;my-app.qvf&quot;</span>)),
  shareReplay(<span class="hljs-number">1</span>)
);
</code></pre>
<p>Similarly, you can get a stream of <a href="handle-invalidations.html">handle invalidations</a> using the following pattern:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// Assume an Observable of a Doc Handle</span>
<span class="hljs-keyword">const</span> app$;

<span class="hljs-keyword">const</span> appInvalidations$ = app$.pipe(
  switchMap(handle =&gt; handle.invalidated$)
);
</code></pre>
<h2 id="simplifying-these-patterns">Simplifying these Patterns</h2>
<p>Manually using operators like <code>switchMap</code>, <code>mergeMap</code>, and <code>concatMap</code> can be useful when writing more complex async logic with the Qlik Engine. However, in our experience the vast majority of API calls with RxQ follow the patterns above. It can get tedious rewriting these patterns over and over, so we have encapsulated the logic into 3 helper operators:</p>
<h3 id="qask">qAsk</h3>
<p><code>qAsk</code> is an alias for <code>switchMap(handle =&gt; handle.ask())</code>. For example, the following patterns are equivalent:</p>
<p><em>EngineVersion using original pattern</em></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> engineVersion$ = global$.pipe(
  switchMap(handle =&gt; handle.ask(EngineVersion))
);
</code></pre>
<p><em>EngineVersion using qAsk</em></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> { qAsk } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;rxq&quot;</span>;

<span class="hljs-keyword">const</span> engineVersion$ = global$.pipe(
  qAsk(EngineVersion)
);
</code></pre>
<h3 id="qaskreplay">qAskReplay</h3>
<p><code>qAskReplay</code> is an alias for <code>switchMap(handle =&gt; handle.ask()), shareReplay(1)</code>. For example, the following patterns are equivalent:</p>
<p><em>App Handle using original pattern</em></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> doc$ = global$.pipe(
  switchMap(handle =&gt; handle.ask(OpenDoc, <span class="hljs-string">&quot;my-app.qvf&quot;</span>)),
  shareReplay(<span class="hljs-number">1</span>)
);
</code></pre>
<p><em>App Handle using qAskReplay</em></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> { qAskReplay } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;rxq&quot;</span>;

<span class="hljs-keyword">const</span> doc$$ = global$.pipe(
  qAskReplay(OpenDoc, <span class="hljs-string">&quot;my-app.qvf&quot;</span>)
);
</code></pre>
<h3 id="invalidations">invalidations</h3>
<p><code>invalidations</code> is an alias for <code>switchMap(handle =&gt; handle.invalidated$)</code>. For example, the following patterns are equivalent:</p>
<p><em>App Handle invalidations using original pattern</em></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> docInvalidations$ = doc$.pipe(
  switchMap(handle =&gt; handle.invalidated$)
);
</code></pre>
<p><em>App Handle invalidations using <code>invalidations</code></em></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> { invalidations } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;rxq&quot;</span>;

<span class="hljs-keyword">const</span> docInvalidations$ = doc$.pipe(
  invalidations()
);
</code></pre>
<p>In many cases, it&apos;s useful to assume an initial invalidation for a Qlik Handle when working with it. Automatically starting with an invalidation can be accomplished by calling <code>qInvalidations(true)</code>:</p>
<p><em>App Handle invalidations with initial handle emit</em></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> { invalidations } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;rxq&quot;</span>;

<span class="hljs-keyword">const</span> docInvalidations$ = doc$.pipe(
  invalidations(<span class="hljs-literal">true</span>)
);
</code></pre>
<p>Putting these together, you can greatly simplify some common scenarios. For example, consider getting a stream of layouts for a generic object:</p>
<p><em>GenericObject layouts via original pattern</em></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> layouts$ = object$.pipe(
  switchMap(handle =&gt; handle.invalidated$.pipe(
      startWith(handle)
    )
  ),
  switchMap(handle =&gt; handle.ask(GetLayout))
);
</code></pre>
<p><em>GenericObject layouts using shortcut operators</em></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> layouts$ = object$.pipe(
  invalidations(<span class="hljs-literal">true</span>),
  qAsk(GetLayout)
);
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="delta.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Delta Mode">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Shortcut Operators","level":"1.3.9","depth":2,"next":{"title":"Recipes","level":"1.4","depth":1,"ref":"","articles":[{"title":"01. Connect to an Engine","level":"1.4.1","depth":2,"path":"recipes/connect.md","ref":"recipes/connect.md","articles":[]},{"title":"02. Get the Engine Version","level":"1.4.2","depth":2,"path":"recipes/engine-version.md","ref":"recipes/engine-version.md","articles":[]},{"title":"03. Make Multiple Global Calls","level":"1.4.3","depth":2,"path":"recipes/multiple-global-calls.md","ref":"recipes/multiple-global-calls.md","articles":[]},{"title":"04. Open an App","level":"1.4.4","depth":2,"path":"recipes/open-an-app.md","ref":"recipes/open-an-app.md","articles":[]},{"title":"05. Get App Properties","level":"1.4.5","depth":2,"path":"recipes/read-app-props.md","ref":"recipes/read-app-props.md","articles":[]},{"title":"06. Set App Properties and Listen for Changes","level":"1.4.6","depth":2,"path":"recipes/set-app-props.md","ref":"recipes/set-app-props.md","articles":[]},{"title":"07. Calculate a Value with a GenericObject","level":"1.4.7","depth":2,"path":"recipes/gen-obj-value.md","ref":"recipes/gen-obj-value.md","articles":[]},{"title":"08. Get a stream of Current Selections","level":"1.4.8","depth":2,"path":"recipes/current-selections.md","ref":"recipes/current-selections.md","articles":[]},{"title":"09. Make a Selection in a Field","level":"1.4.9","depth":2,"path":"recipes/make-a-selection.md","ref":"recipes/make-a-selection.md","articles":[]},{"title":"10. Loop through Selections in a Field","level":"1.4.10","depth":2,"path":"recipes/loop-selections.md","ref":"recipes/loop-selections.md","articles":[]},{"title":"11. Make Selections in a Listbox","level":"1.4.11","depth":2,"path":"recipes/make-lb-selections.md","ref":"recipes/make-lb-selections.md","articles":[]},{"title":"12. Search in a Listbox","level":"1.4.12","depth":2,"path":"recipes/search-lb.md","ref":"recipes/search-lb.md","articles":[]},{"title":"13. Apply Patches to an Object","level":"1.4.13","depth":2,"path":"recipes/apply-patches.md","ref":"recipes/apply-patches.md","articles":[]},{"title":"14. Get a page of data in a HyperCube on invalidation","level":"1.4.14","depth":2,"path":"recipes/get-data-page-on-invalid.md","ref":"recipes/get-data-page-on-invalid.md","articles":[]},{"title":"15. Get pages of data in parallel","level":"1.4.15","depth":2,"path":"recipes/get-pages-in-parallel.md","ref":"recipes/get-pages-in-parallel.md","articles":[]},{"title":"16. Get pages of data sequentially","level":"1.4.16","depth":2,"path":"recipes/get-pages-in-sequence.md","ref":"recipes/get-pages-in-sequence.md","articles":[]},{"title":"17. Make selections on app open","level":"1.4.17","depth":2,"path":"recipes/make-selections-on-app-open.md","ref":"recipes/make-selections-on-app-open.md","articles":[]},{"title":"18. Calculate the duration of an API call and response","level":"1.4.18","depth":2,"path":"recipes/calc-time.md","ref":"recipes/calc-time.md","articles":[]},{"title":"19. Batch Invalidations with Suspend","level":"1.4.19","depth":2,"path":"recipes/batch-invalidations.md","ref":"recipes/batch-invalidations.md","articles":[]},{"title":"20. Toggle Calculations Between Multiple Apps","level":"1.4.20","depth":2,"path":"recipes/toggle-sessions.md","ref":"recipes/toggle-sessions.md","articles":[]},{"title":"21. Auto-reconnect Generic Objects after a network drop","level":"1.4.21","depth":2,"path":"recipes/offline.md","ref":"recipes/offline.md","articles":[]},{"title":"22. Using shortcut operators to get a layout stream","level":"1.4.22","depth":2,"path":"recipes/shortcut-operators.md","ref":"recipes/shortcut-operators.md","articles":[]}]},"previous":{"title":"Delta Mode","level":"1.3.8","depth":2,"path":"basics/delta.md","ref":"basics/delta.md","articles":[]},"dir":"ltr"},"config":{"plugins":["livereload"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"basics/shortcut-operators.md","mtime":"2020-01-28T23:28:34.205Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-01-28T23:32:55.448Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

